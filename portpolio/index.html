<!DOCTYPE HTML>
<html>
<head>
    <title>Botbinoo 포트폴리오에 오신것을 환영합니다.</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

    <link rel="shortcut icon" href="/images/favicon.ico">
    <!-- 합쳐지고 최소화된 최신 CSS -->
    <link rel="stylesheet" href="/assets/bootstrap-3.3.2/css/bootstrap.min.css">
    <!-- 부가적인 테마 -->
    <link rel="stylesheet" href="/assets/bootstrap-3.3.2/css/bootstrap-theme.min.css">
    <!-- 합쳐지고 최소화된 최신 자바스크립트 -->

    <link rel="stylesheet" href="/assets/css/main.css" />
    <link rel="stylesheet" href="/assets/fontawesome-free-5.11.2-web/css/all.css" />
</head>
    <body class="is-preload">

        <!-- Header -->
        <section id="header">
            <header>
                <span class="image avatar"><img src="/images/avatar.jpg" alt="비누 로고" /></span>
                <h1 id="logo"><a href="/">Binoo Factory</a></h1>
                <p>
                    이곳은 Botbinoo의 포트폴리오를 모아둔 곳입니다.<br />
                    메인으로 돌아가시려면 아이콘을 눌러주세요.
                </p>
            </header>
            <nav id="nav">
                <ul>
                    <li><a href="#one" class="active">간략한 인사</a></li>
                    <li><a href="#two">직무 관련 경험 모아보기</a></li>
                    <li><a href="#three">사이드/개인 프로젝트 모아보기</a></li>
                    <li><a href="#four">자격증, 수상내역</a></li>
                    <li><a href="#five">문의하기</a></li>
                </ul>
            </nav>
            <footer>
                <ul class="icons">
                    <li><a href="https://botbinoo.tistory.com/" target="_blank" class="icon fa-book"><span class="label">티스토리</span></a></li>
                    <li><a href="https://kmong.com/@Botbinoo" target="_blank" class="icon fa-won-sign"><span class="label" >크몽</span></a></li>
                    <li><a href="https://github.com/minwoojeon" target="_blank" class="icon fa-github"><span class="label">Github</span></a></li>
                    <li><a href="mailto:botbinoo@naver.com" target="_blank" class="icon fa-envelope"><span class="label">Email</span></a></li>
                </ul>
            </footer>
        </section>

        <!-- Wrapper -->
        <div id="wrapper">

            <!-- Main -->
            <div id="main">

                <!-- One -->
                <section id="one">
                    <div class="image main" data-position="center">
                        <img src="/images/banner.jpg" alt="포트폴리오 메인 배너" />
                    </div>
                    <div class="container">
                        <header class="major">
                            <h2>Bot-binoo</h2>
                            <p>
                                Bot+binoo 는 고등학생 시절 별명 binoo 접미와 <br />
                                제 꿈이 담긴 Robot의 봇 접두를 합친 합성어입니다.
                            </p>
                        </header>
                        <p>현재 상록수역 부근에서 살고 있는 주니어 개발자입니다. 좋은 분들과 굉장히 엄청난! 경험을 쌓기 원합니다. 상주/비상주 정규직, 계약직 구분하지 않고 배울 수 있는 자리를 원합니다. 감사합니다.</p>
                    </div>
                </section>

                <!-- Two -->
                <section id="two">
                    <div class="container">
                        <h3>직무 관련 경험 모아보기</h3>
                        <p>
                            아래와 같은 여러가지 프로젝트 및 직무 관련 경험이 있습니다.
                            아래 표에서 해당 회사명 또는 직무를 선택하시면 각각의 해당하는 프로젝트 내용들을 보실 수 있습니다.
                        </p>

                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>회사명 (소속사)</th>
                                        <th>기간 (yyyyMMdd-yyyyMMdd)</th>
                                    </tr>
                                </thead>
                                <tbody id="_jobRefHead">
                                    <!-- use REST API -->
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                        <br />
                        <div id="_jobRefPed">
                            <!-- use REST API -->
                        </div>

                        <ul class="actions">
                            <li><a href="#two" class="scrolly active button primary large">다른 경력보기</a></li>
                        </ul>

                    </div>
                    
                </section>

                <!-- Three -->
                <section id="three">
                    <div class="container">
                        <h3>사이드/개인 프로젝트 모아보기</h3>
                        <p>
                            회사 업무 이외에도 보다 나은 개발을 하기 위하여 꾸준히 크고 작은 프로젝트와 공부를 진행하고 있습니다.
                            아래는 제가 어떤 노력을 하고 있는지 확인하실 수 있습니다~~ :)
                        </p>

                        <div class="table-wrapper">
                            <div style="
                                display: inline-flex;
                                padding: 20px;
                                text-align: right;
                                flex-direction: row;
                                justify-content: flex-end;
                                align-items: center;
                                width: 100%;
                            ">
                                <span>
                                    &nbsp;
                                </span>
                                <span style="padding-right: 30px;">
                                    <input type="text" value="" name="searchText" id="searchText" placeholder="조회할 값을 입력해주세요" onkeyup="searchEnter()">
                                </span>
                                <span>
                                    <button id="btnSearch" class="scrolly active button primary large" onclick="search()">조회</button>
                                </span>
                            </div>

                            <table>
                                <thead>
                                    <tr>
                                        <th>내용</th>
                                        <th>담당 역할</th>
                                    </tr>
                                </thead>
                                <!-- 크고 작은 프로젝트 분할 필요, tag성 DB관리 필요함. -->
                                <tbody id="_pj_op">
                                    <!-- use REST API -->
                                </tbody>
                            </table>
                            *) 이외 정리되지 않았거나 진행을 하지 않은 것은 제외.

                            <div class="_page">
                                <!-- use REST API -->
                            </div>
                        </div>
                        <br />

                        <div id="_jobRefSubPRA">
                            <!-- use REST API -->
                        </div>
                    </div>
                </section>

                <!-- Four -->
                <section id="four">
                    <div class="container">
                        <h3>자격증, 수상내역</h3>
                        <p>
                            마지막으로 자격증과 수상내역을 통해 경력은 부족하지만 충분히 가능성이 있는 존재라는 것을 알아주셨으면 좋겠습니다!
                        </p>

                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>자격/수상명</th>
                                        <th>발급기관</th>
                                        <th>직무 연관성</th>
                                    </tr>
                                </thead>
                                <tbody id="_bf_jrCerti">
                                    <!-- use REST API -->
                                </tbody>
                            </table>
                        </div>

                    </div>
                </section>

                <!-- Five -->
                <section id="five">
                    <div class="container">
                        <h3>문의하기</h3>
                        <p>
                            개발의뢰/구인 관련 문의사항은 네이버 계정으로 바로 톡톡 하세요! <br />
                            또는 힘내라고 응원해주기!
                        </p>

                        <!-- Talk Talk Banner Script start -->
                        <script type="text/javascript" src="https://partner.talk.naver.com/banners/script"></script>
                        <div class="talk_banner_div" data-id="55050"></div>
                        <!-- Talk Talk Banner Script end -->
                        <br /><br />
                        <p>
                            계정이 없으실 경우, botbinoo@naver.com 또는 wjsalsdnrk7@gmail.com 으로 메일 주셔요~
                        </p>
                    </div>
                </section>

            </div>

            <!-- Footer -->
            <section id="footer">
                <div class="container">
                    <ul class="copyright">
                        <li>&copy; Untitled. All rights reserved.</li>
                        <li>Design: HTML5 UP</li>
                        <li>Develop: BinooFactory</li>
                    </ul>
                    <ul class="icons">
                        <li><a href="https://botbinoo.tistory.com/" target="_blank" class="icon fa-book"><span class="label">티스토리</span></a></li>
                        <li><a href="https://kmong.com/@Botbinoo" target="_blank" class="icon fa-won-sign"><span class="label">크몽</span></a></li>
                        <li><a href="https://github.com/minwoojeon" target="_blank" class="icon fa-github"><span class="label">Github</span></a></li>
                        <li><a href="mailto:botbinoo@naver.com" target="_blank" class="icon fa-envelope"><span class="label">Email</span></a></li>
                    </ul>
                </div>
            </section>

        </div>


        <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
                    </div>
                    <div class="modal-body container" id="_modalContents">
                        ...
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">닫기</button>
                        <span type="button" class="btn">
                            <!-- Talk Talk Banner Script start -->
                            <script type="text/javascript" src="https://partner.talk.naver.com/banners/script"></script>
                            <div class="talk_banner_div" data-id="55050"></div>
                            <!-- Talk Talk Banner Script end -->
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scripts -->
        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/jquery.scrollex.min.js"></script>
        <script src="/assets/js/jquery.scrolly.min.js"></script>

        <script src="/assets/bootstrap-3.3.2/js/bootstrap.min.js"></script>

        <script src="/assets/js/browser.min.js"></script>
        <script src="/assets/js/breakpoints.min.js"></script>
        <script src="/assets/js/util.js"></script>
        <script src="/assets/js/main.js"></script>
        <style>
._page{
    display: grid;
    justify-content: center;
    grid-template-columns: repeat(10, 1fr);
    grid-template-rows: 1fr 3fr;
}
.page-no{
    text-align: center;
    font-size: x-large;
    color: black;
    cursor: pointer;
    margin: 0.4em;
    border: 0.2em solid grey;
    border-radius: 0.5em;
}
.page-no.active{
    color: darkgreen !important;
    border: 0.2em solid darkgreen !important;
    border-radius: 0.5em;
}
            
        </style>
        <script>

            var pageNo = 1;
            const pageSize = 20;
            var title = '';
            var roleTag = '';

            function searchEnter(){
                if(window.event.keyCode == 13){ 
                    search();
                }
            }
            function search(){
                title = $('#searchText').val();
                gotoPage(1);
            }
            function gotoPage(no) {
                pageNo = no;
                $('.page-no').removeClass('active');
                $('.page-no[data-key='+no+']').addClass('active');
                roleTag = '';
                fetchMyhistory((list, page) => {
                    makeTag(list);
                    makePage(page);
                    return true;
                });
            }
            function loadMyCertifications(){
                roleTag = '수상';
                fetchMyhistory((list, page) => {
                    var tmpOpTag = '';
                    for(var idx = 0; idx < list.length; idx++) {
                        tmpOpTag = tmpOpTag 
                            + '<tr>'
                            +'    <td>'+list[idx].title+'</td>'
                            +'    <td>'+list[idx].sub_title+'</td>'
                            +'    <td>O</td>'
                            +'</tr>';
                    }
                    $('#_bf_jrCerti').html($('#_bf_jrCerti').html() + tmpOpTag);
                    return true;
                });
                roleTag = '자격증';
                fetchMyhistory((list, page) => {
                    var tmpOpTag = '';
                    for(var idx = 0; idx < list.length; idx++) {
                        tmpOpTag = tmpOpTag 
                            + '<tr>'
                            +'    <td>'+list[idx].title+'</td>'
                            +'    <td>'+list[idx].sub_title+'</td>'
                            +'    <td>O</td>'
                            +'</tr>';
                    }
                    $('#_bf_jrCerti').html($('#_bf_jrCerti').html() + tmpOpTag);
                    return true;
                });
            }
            function loadMyJobs(){
                roleTag = '직무';
                fetchMyhistory((list, page) => {
                    var tmpOpTag = '';
                    var tmpPedTag = '';
                    for(var idx = 0; idx < list.length; idx++) {
                        tmpOpTag = tmpOpTag 
                            + '<tr>'
                            +'    <td><span style="cursor:pointer" onclick="bf_ppr_toggle.refPR('+list[idx].id+');">'+list[idx].title+'</span></td>'
                            +'    <td>'+ (list[idx].started_at && list[idx].started_at != '0000-01-01 00:00:00'
                                ? todate(list[idx].started_at)
                                : '-') 
                            +(list[idx].ended_at && list[idx].ended_at != ' ~ 9999-12-30 00:00:00'
                                ? ' ~ ' + todate(list[idx].ended_at)
                                : ' -') +'</td>'
    //                        +'    <td>'+list[idx].sub_title+'</td>'
                            +'</tr>';
                        tmpPedTag = tmpPedTag
                            + '<div class="_jobRefPR" id="_bf_jrPR'+list[idx].id+'">'
                            + '    <h3>'+list[idx].role_groups.map(rg => rg.role.name)+'</h3>'
                            + '    <h5>'+list[idx].title+'</h5>'
                            + '    <h5>'+(list[idx].started_at && list[idx].started_at != '0000-01-01 00:00:00'
                                ? todate(list[idx].started_at)
                                : '-') 
                            +(list[idx].ended_at && list[idx].ended_at != ' ~ 9999-12-30 00:00:00'
                                ? ' ~ ' + todate(list[idx].ended_at)
                                : ' -')+'</h5>'
                            + '    <ul class="feature-icons">'
                            + '        <li class="fa-coffee _role">'+list[idx].role_groups.map(rg => rg.role.name)+'</li>'
                            + (isNotNullOrEmpty(list[idx].url) 
                                ? '<li class="fa-book"><a href="'+list[idx].url+'" target="_blank">링크</a></li>'
                                : '')
                            + (isNotNullOrEmpty(list[idx].source_url) 
                                ? '<li class="fa-book"><a href="'+list[idx].source_url+'" target="_blank">문서/소스</a></li>'
                                : '')
                            + '    </ul>'
                            + '    <div class="features">'
                            + '        <article>'
                            + '            <div>'
                            + '                <h4>'+list[idx].sub_title+'</h4>'
                            + '                <ul>'
                            + '                    <ol style="list-style-type : lower-roman;">'
                                + list[idx].contents
                            + '                    </ol>'
                            + '                </ul>'
                            + '            </div>'
                            + (list[idx].attach_groups.length > 1 
                                ? list[idx].attach_groups.join(atg => '<a href="#" class="image"><img src="'+atg.file.web_path+'" alt="'+atg.file.file_name+'" /></a>')
                                : '')
                            + '        </article>'
                            + '    </div>'
                            + '</div>';
                    }
                    $('#_jobRefHead').html(tmpOpTag);
                    $('#_jobRefPed').html(tmpPedTag);
                    $('#_jobRefPed').hide();

                    return true;
                });
            }

            function fetchMyhistory(fnCallbackMakeTag){
                const path = 'https://ztmaplz26dmpko6q4xgbhewumi0sibzs.lambda-url.us-east-1.on.aws/portpolio-api/project/bf-history?offset=1&pageNo='+pageNo+'&pageSize='+pageSize+'&contents='+title+'&role_name='+roleTag;

                $.ajax({
                    url : path,
                    type : 'get',
                    dataType : 'json',
                    success : function(res) {
                        if(!res.result) {
                            alert('aws API 통신에 실패하였습니다.');
                            return false;
                        }
                        if(!res.data || !res.data.list) {
                            alert('aws API 통신에 실패하였습니다. - API 오류');
                            return false;
                        }
                        const list = res.data.list;
                        const page = res.data.page;
                        fnCallbackMakeTag(list, page);
                        return true;
                    }, error: function(){
                        console.log('aws API 통신에 실패하였습니다.');

                        let fileName = 'job';
                        switch(roleTag) {
                            case '직무': fileName = 'job'; break;
                            case '자격증': fileName = 'certi2'; break;
                            case '수상': fileName = 'certi1'; break;
                            default: 
                                if(!pageNo || pageNo == 1) {
                                    fileName = 'p1';
                                } else if(pageNo == 1) {
                                    fileName = 'p2';
                                } else if(pageNo == 1) {
                                    fileName = 'p3';
                                } else {
                                    fileName = 'p4';
                                }
                                break;
                        }
                        fetch('https://minwoojeon.github.io/portpolio/' + fileName + '.json', options)
                            .then((response) => {
                                console.log("response:", response);
                                const list = res.data.list;
                                const page = res.data.page;
                                fnCallbackMakeTag(list, page);
                            })
                            .catch((error) => console.log("error:", error));
                    }
                });
            }
            function todate(strdt){
                return strdt.split(' ')[0];
            }
            function isNotNullOrEmpty(str) {
                return !str && str !== null && str != '';
            }
            function makeAttachImg(list){
                var tmpTag = '';
                for(var idx = 0; idx < list.length; idx++) {
                    if(list[idx].file.web_path == '') {
                        continue;
                    }
                    tmpTag = tmpTag + '<a href="#" class="image"><img src="'+list[idx].file.web_path+'" alt="'+list[idx].file.file_name+'" /></a>';
                }
                return tmpTag;
            }
            function makeTag(list){
                var tmpOpTag = '';
                var tmpPedTag = '';

                for(var idx = 0; idx < list.length; idx++) {
                    tmpOpTag = tmpOpTag 
                        + '<tr>'
                        +'    <td><span style="cursor:pointer" onclick="bf_ppr_toggle.refSubPR('+list[idx].id+');">'+list[idx].title+'</span></td>'
                        +'    <td>'+ list[idx].role_groups.map(rg => rg.role.name) +'</td>'
//                        +'    <td>'+list[idx].sub_title+'</td>'
                        +'</tr>';
                    tmpPedTag = tmpPedTag
                        + '<div class="_jobRefSubPR" id="_bf_jrSubPR'+list[idx].id+'">'
                        + '    <h3>'+list[idx].role_groups.map(rg => rg.role.name)+'</h3>'
                        + '    <h5>'+list[idx].title+'</h5>'
                        + '    <h5>'+(list[idx].started_at && list[idx].started_at != '0000-01-01 00:00:00'
                            ? todate(list[idx].started_at)
                            : '-') 
                        +(list[idx].ended_at && list[idx].ended_at != ' ~ 9999-12-30 00:00:00'
                            ? ' ~ ' + todate(list[idx].ended_at)
                            : ' -')+'</h5>'
                        + '    <ul class="feature-icons">'
                        + '        <li class="fa-coffee _role">'+list[idx].role_groups.map(rg => rg.role.name)+'</li>'
                        + (isNotNullOrEmpty(list[idx].url) 
                            ? '<li class="fa-book"><a href="'+list[idx].url+'" target="_blank">링크</a></li>'
                            : '')
                        + (isNotNullOrEmpty(list[idx].source_url) 
                            ? '<li class="fa-book"><a href="'+list[idx].source_url+'" target="_blank">문서/소스</a></li>'
                            : '')
                        + '    </ul>'
                        + '    <div class="features">'
                        + '        <article>'
                        + '            <div>'
                        + '                <h4>'+list[idx].sub_title+'</h4>'
                        + '                <ul>'
                        + '                    <ol style="list-style-type : lower-roman;">'
                            + list[idx].contents
                        + '                    </ol>'
                        + '                </ul>'
                        + '            </div>'
                        + (list[idx].attach_groups.length > 1 
                            ? makeAttachImg(list[idx].attach_groups)
                            : '')
                        + '        </article>'
                        + '    </div>'
                        + '</div>';
                }
                $('#_pj_op').html(tmpOpTag);
                $('#_jobRefSubPRA').html(tmpPedTag);
                $('#_jobRefSubPRA').hide(); // 너무 길어서 가독성이 떨어짐
            }
            function makePage(page){
                // 아직 수량이 부족해서 페이지네이션을 리로딩할 필요없음.
                var tmpPage = ''; 
                for(var idx = 0; idx < page.total_pages; idx++){
                    tmpPage = tmpPage 
                        + '<span data-key="'+(idx+1)+'" class="page-no '+(page.request_page == (idx+1) ? 'active' : '')+'" onclick="gotoPage('+(idx+1)+')">'+(idx+1)+'</span>';
                }
                $('._page').html(tmpPage);
            }

            var bf_ppr_toggle = {
                refPR: function (rowNo) {
                    $("._jobRefPR").hide();
                    $("#_bf_jrPR" + rowNo).show();

                    $('#myModalLabel').text("직무 관련 경험 상세");
                    $('#_modalContents').html($("#_bf_jrPR" + rowNo).html());
                    $('#myModal').modal("show");
                }, refSubPR: function (rowNo) {
                    $("._jobRefSubPR").hide();
                    $("#_bf_jrSubPR" + rowNo).show();

                    $('#myModalLabel').text("사이드/개인 프로젝트 경험 상세");
                    $('#_modalContents').html($("#_bf_jrSubPR" + rowNo).html());
                    $('#myModal').modal("show");
                }
            };
            $("._jobRefPR").hide();
            $("#_bf_jrPR" + 1).show();

            $("._jobRefSubPR").hide();
            $("#_bf_jrSubPR" + 1).show();

            $(document).ready(function(){
                loadMyCertifications(); 
                loadMyJobs();
                setTimeout(() => {
                    roleTag = '';
                    gotoPage(1);
                }, 200);
            });
        </script>
        <script>
            /*
            $('.page-no').on('click', function(){
                const pageNo = $(this).text();
                $('.pj_page').hide();
                $('.pj_page_' + pageNo).show();
            });
            $('.pj_page').hide();
            $('.pj_page_1').show();
            */
        </script>

    </body>
</html>